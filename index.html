<!DOCTYPE html>
<html>
<head>
    <title>Voice Attendance System</title>
</head>
<body>
    <h2>Voice Attendance System</h2>
    <button onclick="startAttendance()">Start Attendance</button>
    <p id="status"></p>

    <script>
        const students = ["Arjun", "Riya", "Manoj", "Sneha", "Chandu"];
        let roll = 0;
        const attendance = {};

        function speak(text) {
            const msg = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(msg);
        }

        function listen(callback) {
            const recognition = new webkitSpeechRecognition();
            recognition.lang = "en-IN";
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript.toLowerCase();
                callback(transcript);
            };
            recognition.start();
        }

        function startAttendance() {
            if(roll >= students.length) {
                document.getElementById("status").innerText = "Attendance Completed!";
                speak("Attendance completed");
                console.log(attendance);
                return;
            }

            const name = students[roll];
            speak(`Roll number ${roll+1}, ${name}`);
            document.getElementById("status").innerText = `Calling: Roll ${roll+1} - ${name}`;

            setTimeout(() => {
                speak("Say Present");
                listen((response) => {
                    if(response.includes("present")) {
                        attendance[name] = "Present";
                        speak("Marked Present");
                    } else {
                        attendance[name] = "Absent";
                        speak("Marked Absent");
                    }
                    roll++;
                    startAttendance();
                });
            }, 1500);
        }
    </script>
</body>
</html>